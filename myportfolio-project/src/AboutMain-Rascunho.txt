import { styled, Grid } from "@mui/material";
import React, { Suspense } from "react";
import { Container } from "@mui/material";
import { Box } from "@mui/system";
import AboutHeader from "./AboutHeader";
import AboutCards from "./AboutCards";
import AboutDescription from "./AboutDescription";
import AboutCouses from "./AboutCourses";

// Lazy load do AnimatedBackground
const AnimatedBackground = React.lazy(
  () => import("../../../../components/AnimatedBackground/AnimatedBackground")
);

const StyledAbout = styled("div")(({ theme }) => ({
  backgroundColor: theme.palette.secondary.contrastText,
  minHeight: "100vh",
  display: "flex",
  flexDirection: "column",
  alignItems: "center",
  color: theme.palette.primary.contrastText,
  overflow: "hidden",
  paddingBottom: "4rem", // adiciona espaço embaixo para o botão
  [theme.breakpoints.down("sm")]: {
    paddingBottom: "8rem", // mais espaço em telas pequenas
  },
}));

const AboutMain: React.FC = () => {
  return (
    <>
      <StyledAbout aria-labelledby="about-main">
        <Container maxWidth="lg">
          <br />
          <AboutHeader />
          <AboutCards />

          <Grid size={{ xs: 12, md: 5 }}>
            <Box position="relative" pb={3}>
              <Suspense fallback={<div />}>
                <Box
                  position="absolute"
                  width={{ xs: "30rem", md: "46rem" }}
                  height={"100%"}
                  top={0}
                  left={{ xs: "50%", md: "80%" }} // centraliza no mobile
                  sx={{
                    zIndex: 0,
                    transform: {
                      xs: "translateX(-50%)",
                      md: "translateX(calc(1rem + 1vw))",
                    },
                    display: { xs: "block", md: "block" }, // pode esconder se quiser mobile
                  }}
                >
                  <AnimatedBackground />
                </Box>
              </Suspense>
            </Box>
          </Grid>

          <AboutDescription />
          <AboutCouses />
        </Container>
      </StyledAbout>
    </>
  );
};

export default AboutMain;
